color = "black", size = 4, hjust = 1.0) +
labs(fill = "") +
theme(legend.position = "bottom")
plot_overview_2
plot_overview_2 <- ggplot(tree_by_species, aes(x = "", y = totaltree, fill = species_name)) +
geom_bar(width = 1, stat = "identity") + # this plots a stacked bar chart
coord_polar(theta = "y", start = 0)
plot_overview_2 <- plot_overview_2 + theme_void() +
geom_text(aes(y = totaltree/3 + c(0, cumsum(totaltree)[-length(totaltree)]),
label = percent), # frequencies (size labels)
color = "black", size = 4, hjust = 1.0) +
labs(fill = "Health status") +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12))
plot_overview_2
plot_overview_2 <- ggplot(tree_by_species, aes(x = "", y = totaltree, fill = species_name)) +
geom_bar(width = 1, stat = "identity") + # this plots a stacked bar chart
coord_polar(theta = "y", start = 0)
plot_overview_2 <- plot_overview_2 + theme_void() +
geom_text(aes(y = totaltree/9 + c(0, cumsum(totaltree)[-length(totaltree)]),
label = percent), # frequencies (size labels)
color = "black", size = 4, hjust = 1.0) +
labs(fill = "Species Name") +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12))
plot_overview_2
plot_overview_2 <- ggplot(tree_by_species, aes(x = "", y = totaltree, fill = species_name)) +
geom_bar(width = 1, stat = "identity") + # this plots a stacked bar chart
coord_polar(theta = "y", start = 0)
plot_overview_2 <- plot_overview_2 + theme_void() +
geom_text(aes(y = totaltree/2 + c(0, cumsum(totaltree)[-length(totaltree)]),
label = percent), # frequencies (size labels)
color = "black", size = 4, hjust = 1.0) +
labs(fill = "Species Name") +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12))
plot_overview_2
plot_overview_2 <- ggplot(tree_by_species, aes(x = "", y = totaltree, fill = species_name)) +
geom_bar(width = 1, stat = "identity") + # this plots a stacked bar chart
coord_polar(theta = "y", start = 0)
plot_overview_2 <- plot_overview_2 + theme_void() +
geom_text(aes(y = totaltree/5 + c(0, cumsum(totaltree)[-length(totaltree)]),
label = percent), # frequencies (size labels)
color = "black", size = 4, hjust = 1.0) +
labs(fill = "Species Name") +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12))
plot_overview_2
plot_overview_2 <- ggplot(tree_by_species, aes(x = "", y = totaltree, fill = species_name)) +
geom_bar(width = 1, stat = "identity") + # this plots a stacked bar chart
coord_polar(theta = "y", start = 0)
plot_overview_2 <- plot_overview_2 + theme_void() +
geom_text(aes(y = totaltree/3 + c(0, cumsum(totaltree)[-length(totaltree)]),
label = percent), # frequencies (size labels)
color = "black", size = 4, hjust = 1.0) +
labs(fill = "Species Name") +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12))
plot_overview_2
plot_overview_2 <- ggplot(tree_by_species, aes(x = "", y = totaltree, fill = species_name)) +
geom_bar(width = 1, stat = "identity") + # this plots a stacked bar chart
coord_polar(theta = "y", start = 0)
plot_overview_2 <- plot_overview_2 + theme_void() +
geom_text(aes(y = totaltree/3 + c(0, cumsum(totaltree)[-length(totaltree)]),
label = percent), # frequencies (size labels)
color = "black", size = 4, hjust = 1.0) +
labs(fill = "Species Name") +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12)) +
xlim(0.5, 2.5)
plot_overview_2
plot_overview_2 <- ggplot(tree_by_species, aes(x = "", y = totaltree, fill = species_name)) +
geom_bar(stat = "identity") + # this plots a stacked bar chart
coord_polar(theta = "y", start = 0) +
theme_void() +
geom_text(aes(y = totaltree/3 + c(0, cumsum(totaltree)[-length(totaltree)]),
label = percent), # frequencies (size labels)
color = "black", size = 4, hjust = 1.0) +
labs(fill = "Species Name") +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12)) +
xlim()
plot_overview_2 <- ggplot(tree_by_species, aes(x = "", y = totaltree, fill = species_name)) +
geom_bar(stat = "identity") + # this plots a stacked bar chart
coord_polar(theta = "y", start = 0) +
theme_void() +
geom_text(aes(y = totaltree/3 + c(0, cumsum(totaltree)[-length(totaltree)]),
label = percent), # frequencies (size labels)
color = "black", size = 4, hjust = 1.0) +
labs(fill = "Species Name") +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12)) +
xlim(0.5, 2.5)
plot_overview_2
plot_overview_2 <- ggplot(tree_by_species, aes(x = "", y = totaltree, fill = species_name)) +
geom_bar(stat = "identity") + # this plots a stacked bar chart
coord_polar(theta = "y", start = 0) +
theme_void() +
geom_text(aes(y = totaltree/3 + c(0, cumsum(totaltree)[-length(totaltree)]),
label = percent), # frequencies (size labels)
color = "black", size = 4, hjust = 1.0) +
labs(fill = "Species Name") +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12))
plot_overview_2
plot_overview_2 <- ggplot(tree_by_species, aes(x = "", y = totaltree, fill = species_name)) +
geom_bar(stat = "identity") + # this plots a stacked bar chart
coord_polar(theta = "y", start = 0) +
theme_void() +
geom_text(aes(y = totaltree/3 + c(0, cumsum(totaltree)[-length(totaltree)]),
label = percent), # frequencies (size labels)
color = "black", size = 4, hjust = 1.0) +
labs(fill = "Species Name") +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12))
ggplotly(plot_overview_2,
tooltip = "text")
plot_overview_2 <- ggplot(tree_by_species, aes(x = "", y = totaltree, fill = species_name, text = label)) +
geom_bar(stat = "identity") + # this plots a stacked bar chart
coord_polar(theta = "y", start = 0) +
theme_void() +
geom_text(aes(y = totaltree/3 + c(0, cumsum(totaltree)[-length(totaltree)]),
label = percent), # frequencies (size labels)
color = "black", size = 4, hjust = 1.0) +
labs(fill = "Species Name") +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12))
ggplotly(plot_overview_2,
tooltip = "text")
plot_overview_2 <- ggplot(tree_by_species, aes(x = "", y = totaltree, fill = species_name, text = label)) +
geom_bar(stat = "identity") + # this plots a stacked bar chart
coord_polar(theta = "y", start = 0) +
theme_void() +
labs(fill = "Species Name") +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12))
ggplotly(plot_overview_2,
tooltip = "text")
plot_overview_2 <- ggplot(tree_by_species, aes(x = "", y = totaltree, fill = species_name, text = label)) +
geom_bar(stat = "identity") + # this plots a stacked bar chart
coord_polar(theta = "y", start = 0) +
theme_void() +
geom_text(aes(y = totaltree/3 + c(0, cumsum(totaltree)[-length(totaltree)]),
label = percent), # frequencies (size labels)
color = "black", size = 4, hjust = 1.0) +
labs(fill = "Species Name") +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12))
ggplotly(plot_overview_2)
plot_overview_2 <- ggplot(tree_by_species, aes(x = "", y = totaltree, fill = species_name)) +
geom_bar(stat = "identity") + # this plots a stacked bar chart
coord_polar(theta = "y", start = 0) +
theme_void() +
geom_text(aes(y = totaltree/3 + c(0, cumsum(totaltree)[-length(totaltree)]),
label = percent), # frequencies (size labels)
color = "black", size = 4, hjust = 1.0) +
labs(fill = "Species Name") +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12))
ggplotly(plot_overview_2)
plot_overview_2 <- ggplot(tree_by_species, aes(x = "", y = totaltree, fill = species_name)) +
geom_bar(stat = "identity") + # this plots a stacked bar chart
coord_polar(theta = "y", start = 0) +
theme_void() +
geom_text(aes(y = totaltree/3 + c(0, cumsum(totaltree)[-length(totaltree)]),
label = percent), # frequencies (size labels)
color = "black", size = 4, hjust = 1.0) +
labs(fill = "Species Name") +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12))
#ggplotly(plot_overview_2)
# Create test data.
data <- data.frame(
category=c("A", "B", "C"),
count=c(10, 60, 30)
)
# Compute percentages
data$fraction <- data$count / sum(data$count)
# Compute the cumulative percentages (top of each rectangle)
data$ymax <- cumsum(data$fraction)
# Compute the bottom of each rectangle
data$ymin <- c(0, head(data$ymax, n=-1))
# Compute label position
data$labelPosition <- (data$ymax + data$ymin) / 2
# Compute a good label
data$label <- paste0(data$category, "\n value: ", data$count)
# Make the plot
ggplot(data, aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=category)) +
geom_rect() +
geom_label( x=3.5, aes(y=labelPosition, label=label), size=6) +
scale_fill_brewer(palette=4) +
coord_polar(theta="y") +
xlim(c(2, 4)) +
theme_void() +
theme(legend.position = "none")
head(data)
tree_by_species <- monitoring_clean %>%
group_by(species_name) %>%
summarize(totaltree = sum(total_tree)) %>%
arrange(-totaltree) %>%
mutate(percent = glue("{round(totaltree / sum(totaltree) * 100, 2)}")) %>%
mutate(label = glue("Species Name: {species_name}
Total tree: {comma(totaltree)}")) %>%
mutate(ymax = cumsum(percent)) %>%
mutate(ymin = c(0, head(ymax, n-1))) %>%
mutate(labelPosition = (ymax + ymin)/2)
tree_by_species <- monitoring_clean %>%
group_by(species_name) %>%
summarize(totaltree = sum(total_tree)) %>%
arrange(-totaltree) %>%
mutate(percent = round(totaltree / sum(totaltree) * 100, 2)) %>%
mutate(label = glue("Species Name: {species_name}
Total tree: {comma(totaltree)}")) %>%
mutate(ymax = cumsum(percent)) %>%
mutate(ymin = c(0, head(ymax, n-1))) %>%
mutate(labelPosition = (ymax + ymin)/2)
tree_by_species <- monitoring_clean %>%
group_by(species_name) %>%
summarize(totaltree = sum(total_tree)) %>%
arrange(-totaltree) %>%
mutate(percent = round(totaltree / sum(totaltree) * 100, 2)) %>%
mutate(label = glue("Species Name: {species_name}
Total tree: {comma(totaltree)}")) %>%
mutate(ymax = cumsum(percent)) %>%
mutate(ymin = c(0, head(ymax, n= -1))) %>%
mutate(labelPosition = (ymax + ymin)/2)
head(tree_by_species)
plot_overview_2 <- ggplot(data, aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=species_name)) +
geom_rect() +
geom_label( x=3.5, aes(y=labelPosition, label=label), size=6) +
scale_fill_brewer(palette=4) +
coord_polar(theta="y") +
xlim(c(2, 4)) +
theme_void() +
theme(legend.position = "none")
plot_overview_2
plot_overview_2 <- ggplot(tree_by_species, aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=species_name)) +
geom_rect() +
geom_label( x=3.5, aes(y=labelPosition, label=label), size=6) +
scale_fill_brewer(palette=4) +
coord_polar(theta="y") +
xlim(c(2, 4)) +
theme_void() +
theme(legend.position = "none")
plot_overview_2
#ggplotly(plot_overview_2)
plot_overview_2 <- ggplot(tree_by_species, aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=species_name)) +
geom_rect() +
geom_label( x=3.5, aes(y=labelPosition, label=label), size=2) +
scale_fill_brewer(palette=4) +
coord_polar(theta="y") +
xlim(c(2, 4)) +
theme_void() +
theme(legend.position = "none")
plot_overview_2
#ggplotly(plot_overview_2)
plot_overview_2 <- ggplot(tree_by_species, aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=species_name)) +
geom_rect() +
geom_label( x=3.5, aes(y=labelPosition, label=label), size=2) +
scale_fill_brewer(palette=4) +
coord_polar(theta="y") +
xlim(c(2, 4)) +
theme_void()
plot_overview_2
#ggplotly(plot_overview_2)
plot_overview_2 <- ggplot(tree_by_species, aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=species_name)) +
geom_rect() +
scale_fill_brewer(palette=4) +
coord_polar(theta="y") +
xlim(c(2, 4)) +
theme_void()
plot_overview_2
#ggplotly(plot_overview_2)
plot_overview_2 <- ggplot(tree_by_species, aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=species_name)) +
geom_rect() +
scale_fill_brewer(palette=4) +
coord_polar(theta="y") +
xlim(c(2, 4)) +
theme_void() +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12)) +
labs(fill = "Species name") +
plot_overview_2
plot_overview_2 <- ggplot(tree_by_species, aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=species_name)) +
geom_rect() +
scale_fill_brewer(palette=4) +
coord_polar(theta="y") +
xlim(c(2, 4)) +
theme_void() +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12)) +
labs(fill = "Species name")
plot_overview_2
#ggplotly(plot_overview_2)
plot_overview_2 <- ggplot(tree_by_species, aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=species_name, text = label)) +
geom_rect() +
scale_fill_brewer(palette=4) +
coord_polar(theta="y") +
xlim(c(2, 4)) +
theme_void() +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12)) +
labs(fill = "Species name")
plot_overview_2
#ggplotly(plot_overview_2)
plot_overview_2 <- ggplot(tree_by_species, aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=species_name, text = label)) +
geom_rect() +
scale_fill_brewer(palette=4) +
coord_polar(theta="y") +
xlim(c(2, 4)) +
theme_void() +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12)) +
labs(fill = "Species name")
plot_overview_2
ggplotly(plot_overview_2, tooltip = "text")
runApp()
plot_ly(data=tree_by_species,labels=~species_name, values=~totaltree, type="pie") %>%
layout(title = 'United States Music Genre Prevalent in 1999',
xaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE),
yaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE))
runApp()
plot_ly(data=tree_by_species,labels=~species_name, values=~comma(totaltree), type="pie") %>%
layout(title = 'United States Music Genre Prevalent in 1999',
xaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE),
yaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE))
plot_overview_2 <- ggplot(data = tree_by_species, mapping = aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=species_name, text = label)) +
geom_rect() +
scale_fill_brewer(palette=4) +
coord_polar(theta="y") +
xlim(c(2, 4)) +
theme_void() +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12)) +
labs(fill = "Species name")
plot_overview_2
ggplotly(plot_overview_2, tooltip = "text")
runApp()
plot_overview_2 <- ggplot(data = tree_by_species, mapping = aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=species_name, text = label)) +
geom_rect() +
scale_fill_brewer(palette=4) +
coord_polar(theta="y") +
xlim(c(2, 4)) +
theme_void() +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12)) +
labs(fill = "Species name")
plot_overview_2
plot_overview_2 <- ggplot(data = tree_by_species, mapping = aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=species_name)) +
geom_rect() +
scale_fill_brewer(palette=4) +
coord_polar(theta="y") +
xlim(c(2, 4)) +
theme_void() +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12)) +
labs(fill = "Species name")
plot_overview_2
plot_overview_2 <- ggplot(tree_by_species, aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=species_name)) +
geom_rect() +
geom_label( x=3.5, aes(y=labelPosition, label=label), size=2) +
scale_fill_brewer(palette=4) +
coord_polar(theta="y") +
xlim(c(2, 4)) +
theme_void() +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12)) +
labs(fill = "Species name")
plot_overview_2
#ggplotly(plot_overview_2)
plot_overview_2 <- ggplot(tree_by_species, aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=species_name)) +
geom_rect() +
geom_label( x=3.5, aes(y=labelPosition, label=totaltree), size=2) +
scale_fill_brewer(palette=4) +
coord_polar(theta="y") +
xlim(c(2, 4)) +
theme_void() +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12)) +
labs(fill = "Species name")
plot_overview_2
#ggplotly(plot_overview_2)
plot_overview_2 <- ggplot(tree_by_species, aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=species_name)) +
geom_rect() +
geom_label( x=3.5, aes(y=labelPosition, label=totaltree), size=4) +
scale_fill_brewer(palette=4) +
coord_polar(theta="y") +
xlim(c(2, 4)) +
theme_void() +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12)) +
labs(fill = "Species name")
plot_overview_2
#ggplotly(plot_overview_2)
plot_overview_2 <- ggplot(tree_by_species, aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=species_name)) +
geom_rect() +
geom_label( x=3.5, aes(y=labelPosition, label=totaltree), size=3) +
scale_fill_brewer(palette=4) +
coord_polar(theta="y") +
xlim(c(2, 4)) +
theme_void() +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12)) +
labs(fill = "Species name")
plot_overview_2
#ggplotly(plot_overview_2)
plot_overview_2 <- ggplot(tree_by_species, aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=species_name)) +
geom_rect() +
#geom_label( x=3.5, aes(y=labelPosition, label=toto), size=2) +
scale_fill_brewer(palette=4) +
coord_polar(theta="y") +
xlim(c(2, 4)) +
theme_void() +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12)) +
labs(fill = "Species name")
plot_overview_2
#ggplotly(plot_overview_2)
runApp()
install.packages("ggiraph")
ggplot() + #assign as object in environment
geom_bar_interactive(data = tree_by_species, stat = "identity", color = "white", aes(x = 2, y = prop, fill = name, tooltip = label)) + #Add tooltip to aes()
coord_polar(theta = "y", start = 0)+
scale_fill_manual(values = my_colors) +
theme_void() +
xlim(.5, 2.5)
library(ggiraph)
runApp()
runApp()
plot_overview_2 <- ggplot(tree_by_species, aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=species_name)) +
geom_rect() +
geom_label( x=3.5, aes(y=labelPosition, label=comma(totaltree)), size=2) +
scale_fill_brewer(palette=4) +
coord_polar(theta="y") +
xlim(c(2, 4)) +
theme_void() +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12)) +
labs(fill = "Species name")
plot_overview_2
#ggplotly(plot_overview_2)
plot_overview_2 <- ggplot(tree_by_species, aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=species_name)) +
geom_rect() +
geom_label( x=3.5, aes(y=labelPosition, label=comma(totaltree)), size=2) +
scale_fill_brewer(palette=4) +
coord_polar(theta="y") +
xlim(c(2, 4)) +
theme_void() +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12)) +
labs(fill = "Species name")
plot_overview_2
#ggplotly(plot_overview_2)
plot_overview_2 <- ggplot(tree_by_species, aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=species_name)) +
geom_rect() +
geom_label( x=3.5, aes(y=labelPosition, label=label), size=3) +
scale_fill_brewer(palette=4) +
coord_polar(theta="y") +
xlim(c(2, 4)) +
theme_void() +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12)) +
labs(fill = "Species name")
plot_overview_2
#ggplotly(plot_overview_2)
tree_by_species <- monitoring_clean %>%
group_by(species_name) %>%
summarize(totaltree = sum(total_tree)) %>%
arrange(-totaltree) %>%
mutate(percent = round(totaltree / sum(totaltree) * 100, 2)) %>%
mutate(label = glue("Species Name: {species_name}
Total tree: {comma(totaltree)}")) %>%
mutate(ymax = cumsum(percent)) %>%
mutate(ymin = c(0, head(ymax, n= -1))) %>%
mutate(labelPosition = (ymax + ymin)/2)
tree_by_species
tree_by_species <- monitoring_clean %>%
group_by(species_name) %>%
summarize(totaltree = sum(total_tree)) %>%
filter(totaltree > 0) %>%
arrange(-totaltree) %>%
mutate(percent = round(totaltree / sum(totaltree) * 100, 2)) %>%
mutate(label = glue("Species Name: {species_name}
Total tree: {comma(totaltree)}")) %>%
mutate(ymax = cumsum(percent)) %>%
mutate(ymin = c(0, head(ymax, n= -1))) %>%
mutate(labelPosition = (ymax + ymin)/2)
tree_by_species
plot_overview_2 <- ggplot(tree_by_species, aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=species_name)) +
geom_rect() +
geom_label( x=3.5, aes(y=labelPosition, label=label), size=3) +
scale_fill_brewer(palette=4) +
coord_polar(theta="y") +
xlim(c(2, 4)) +
theme_void() +
theme(legend.title = element_text(size = 12),
legend.text = element_text(size = 12)) +
labs(fill = "Species name")
plot_overview_2
#ggplotly(plot_overview_2)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
